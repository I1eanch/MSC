<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Аллан Рэймэн. Портфолио.</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1 class="header">Аллан Рэймэн</h1>
    <img src="images/screen.jpg" width="400" alt="Аллан Рэймэн"/>
    <div class="list">
        <ul>
            <li><a href="#link1"><strong>Кто это</strong></a></li>
            <li><a href="#link2"><strong>Популярность</strong></a></li>
            <li><a href="#link3"><strong>Творчество</strong></a></li>
            <li><a href="#link4"><strong>Личная жизнь</strong></a></li>
            <li><a href="#link5"><strong>Ссылки</strong></a></li>
            <li><a href="#link6"><strong>Поддержка</strong></a></li>
        </ul>
    </div>
    <h2 class="header" id="link1">Кто это</h2>
    <p><strong>Аллан Рэймэн – это музыкальный исполнитель, композитор и автор собственных песен, который в своем арсенале имеет 3 студийных альбома, а также очень таинственная и 
        неординарная личность. О ранних годах музыканта мало что известно. Сам он позиционирует себя как целеустремлённого человека, который еще в детстве знал, что ему суждено
        многого добиться. Ради своей мечты он был готов идти напролом и работать сутками. Музыкант уверен, что без должного упорства он бы никогда не прославился и не стал бы
        тем, кем он является на данный момент.</strong></p>
    <h2 class="header" id="link2">Популярность</h2>
    <p><strong>На большой сцене Аллан выступает, начиная с 2016 года. Сотрудничает он с известным музыкальным лейблом «Communion Music». Именно эта организация спонсировала выпуск 
        трех его альбомов, которые получили названия «Hotel Allan», «Roadhouse 01», «Harry Hard-on».Музыкант часто радует своих поклонников живыми выступлениями, становится лауреатом престижных премий в области музыки. Например, в 2018 году он стал обладателем премии 
        «Прорыв года» на музыкальной церемонии «Juno».</strong></p>
    <h2 class="header" id="link3">Творчество</h2>
    <p><strong>Самой громкой и знаменитой композицией этого музыканта является песня «Hotel Rayman». Благодаря этой работе он стал знаменитым, так как она стала его 
        дебютом на большой сцене. Стиль исполнения Аллана Рэймэна нельзя определить однозначно. Он очень умело сочетает различные музыкальные жанры, такие как рэп, кантри, соул. 
        Творчество для него – это возможность дать выход своим эмоциям, рассказать о своих переживаниях. Многие отмечают, что песни Аллана получаются очень мрачными, но именно 
        в этом и состоит их прелесть.</strong></p>
    <h2 class="header" id="link4">Личная жизнь</h2>
    <p><strong>Состояние личной жизни Аллана Рэймэна – это тайна, скрытая от посторонних глаз. Хотя, по официальным данным, музыкант не состоит в браке. Таким образом, 
        данного музыканта и его творчество можно назвать загадочными, ведь он намеренно не раскрывает многих подробностей о своей жизни.</strong></p>
    <h2 class="header" id="link5">Ссылки</h2>
    <div class="list">
        <ul>
            <li><a href="https://www.instagram.com/allanrayman/"><strong>Страница в instagram</strong></a></li>
            <li><a href="https://www.allanrayman.com/"><strong>Сайт</strong></a></li>
            <li><a href="https://open.spotify.com/artist/6Yv6OBXD6ZQakEljaGaDAk?autoplay=true"><strong>Дискограия Spotify</strong></a></li>
        </ul>
    </div>
    <h2 class="header" id="link6">Поддержка творчества</h2>
    <div class="payment-section">
        <p><strong>Поддержите Аллана Рэймэна и помогите создавать новую музыку. Ваш вклад важен для продолжения творческого пути!</strong></p>
        
        <div class="payment-options">
            <div class="payment-card">
                <h3>Единоразовая поддержка</h3>
                <p>Выберите сумму для однократного пожертвования</p>
                <div class="amount-buttons">
                    <button onclick="selectAmount(100, false)">100 ₽</button>
                    <button onclick="selectAmount(500, false)">500 ₽</button>
                    <button onclick="selectAmount(1000, false)">1000 ₽</button>
                    <button onclick="selectAmount(2500, false)">2500 ₽</button>
                </div>
            </div>
            
            <div class="payment-card">
                <h3>Регулярная поддержка</h3>
                <p>Ежемесячная подписка для постоянной поддержки</p>
                <div class="amount-buttons">
                    <button onclick="selectAmount(100, true)">100 ₽/мес</button>
                    <button onclick="selectAmount(300, true)">300 ₽/мес</button>
                    <button onclick="selectAmount(500, true)">500 ₽/мес</button>
                    <button onclick="selectAmount(1000, true)">1000 ₽/мес</button>
                </div>
            </div>
        </div>

        <div id="payment-form" class="payment-form" style="display: none;">
            <h3>Оформление платежа</h3>
            <form id="paymentForm">
                <div class="form-group">
                    <label for="amount">Сумма:</label>
                    <input type="number" id="amount" name="amount" readonly>
                </div>
                
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required placeholder="your@email.com">
                </div>
                
                <div class="form-group">
                    <label for="phone">Телефон:</label>
                    <input type="tel" id="phone" name="phone" required placeholder="+7 (999) 123-45-67">
                </div>
                
                <div class="form-group">
                    <label for="paymentGateway">Способ оплаты:</label>
                    <select id="paymentGateway" name="paymentGateway" required>
                        <option value="">Выберите способ оплаты</option>
                        <option value="yoomoney">ЮMoney (Карта, QIWI, ЮMoney)</option>
                        <option value="tinkoff">Тинькофф (Банковская карта)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="recurring">
                        <input type="checkbox" id="recurring" name="recurring">
                        Сделать регулярным платежом
                    </label>
                </div>
                
                <button type="submit" class="pay-button">Перейти к оплате</button>
            </form>
        </div>

        <div id="payment-status" class="payment-status" style="display: none;"></div>
    </div>

    <script>
        let selectedAmount = 0;
        let isRecurring = false;

        function selectAmount(amount, recurring) {
            selectedAmount = amount;
            isRecurring = recurring;
            
            document.getElementById('amount').value = amount;
            document.getElementById('recurring').checked = recurring;
            document.getElementById('payment-form').style.display = 'block';
            
            // Scroll to form
            document.getElementById('payment-form').scrollIntoView({ behavior: 'smooth' });
        }

        document.getElementById('paymentForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const paymentData = {
                amount: parseFloat(formData.get('amount')),
                email: formData.get('email'),
                phone: formData.get('phone'),
                paymentGateway: formData.get('paymentGateway'),
                recurring: formData.get('recurring') === 'on',
                description: isRecurring ? 
                    `Регулярная поддержка Аллана Рэймэна - ${selectedAmount} ₽/мес` : 
                    `Поддержка Аллана Рэймэна - ${selectedAmount} ₽`
            };

            const statusDiv = document.getElementById('payment-status');
            statusDiv.style.display = 'block';
            statusDiv.innerHTML = '<p class="loading">Обработка платежа...</p>';

            try {
                const response = await fetch('/api/payments/create', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(paymentData)
                });

                const result = await response.json();

                if (result.success) {
                    statusDiv.innerHTML = '<p class="success">Перенаправление на страницу оплаты...</p>';
                    setTimeout(() => {
                        window.location.href = result.confirmationUrl;
                    }, 2000);
                } else {
                    statusDiv.innerHTML = `<p class="error">Ошибка: ${result.error}</p>`;
                }
            } catch (error) {
                statusDiv.innerHTML = `<p class="error">Ошибка соединения: ${error.message}</p>`;
            }
        });

        // Phone number formatting
        document.getElementById('phone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 0) {
                if (value[0] === '7') {
                    value = value.substring(1);
                }
                if (value.length <= 3) {
                    value = `+7 (${value}`;
                } else if (value.length <= 6) {
                    value = `+7 (${value.substring(0, 3)}) ${value.substring(3)}`;
                } else if (value.length <= 8) {
                    value = `+7 (${value.substring(0, 3)}) ${value.substring(3, 6)}-${value.substring(6)}`;
                } else {
                    value = `+7 (${value.substring(0, 3)}) ${value.substring(3, 6)}-${value.substring(6, 8)}-${value.substring(8, 10)}`;
                }
            }
            e.target.value = value;
        });
    </script>
</body>
</html>